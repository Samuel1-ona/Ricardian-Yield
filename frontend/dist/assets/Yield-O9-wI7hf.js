import{j as e}from"./web3-vendor-Ds0lPK1P.js";import{r as c}from"./react-vendor-CIGKTyFs.js";import{C as r,a as m,b as o,c as d,d as s}from"./Card-DWvOJBa6.js";import{u as f,B as b}from"./index-DrNp6A46.js";import{z as v}from"./ui-vendor-BDTlLGxs.js";import{u as C}from"./useMounted-Ci4OUALD.js";import{c as w}from"./useStacksWriteWallet-DpzWZPfV.js";import{l as B,m as I}from"./useStacksRead-BF2QryqZ.js";import"./charts-vendor-D_nd7r1X.js";function W(){const{isConnected:x,connect:j}=f(),p=C(),[t]=c.useState(BigInt(1)),{claimYield:y,isPending:u}=w(),{currentPeriod:i}=B(t),{claimableYield:g}=I(t,i??void 0),l=c.useMemo(()=>{if(!i||i===null)return[];const a=g||BigInt(0);return[{period:Number(i),claimable:a,totalDistributable:BigInt(0),claimed:a===BigInt(0)}]},[i,g]),h=c.useMemo(()=>l.reduce((a,n)=>a+n.claimable,BigInt(0)),[l]),N=async a=>{if(!x){v.error("Please connect your wallet");return}try{await y(t,BigInt(a))}catch(n){console.error(n)}};return p?x?e.jsxs("main",{className:"flex-1 bg-gray-50 relative pattern-grid",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-[#06B6D4]/10 to-primary/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-light text-foreground mb-3 tracking-tight",children:"Yield Distribution"}),e.jsx("p",{className:"text-gray-600 font-light text-lg",children:"View and claim your proportional yield"})]}),e.jsxs(r,{className:"mb-8 bg-gradient-to-br from-primary/10 via-white to-[#06B6D4]/10 border-0 elevation-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-[#06B6D4]/20 rounded-full blur-2xl"}),e.jsxs(m,{className:"relative z-10",children:[e.jsx(o,{className:"text-2xl",children:"Total Claimable Yield"}),e.jsx(d,{children:"Available across all periods"})]}),e.jsx(s,{className:"relative z-10",children:e.jsx("p",{className:"text-4xl font-light text-primary tracking-tight",children:h>BigInt(0)?`${(Number(h)/1e6).toFixed(6)} USDCx`:"0 USDCx"})})]}),e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsx(r,{children:e.jsxs(s,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No distribution periods available yet."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Yield will appear here after distributions are made."})]})}):l.map(a=>e.jsxs(r,{hover:!0,children:[e.jsx(m,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(o,{children:["Period ",a.period]}),e.jsx(d,{children:a.claimed?"Claimed":a.claimable>BigInt(0)?"Available to claim":"No claimable yield"})]}),!a.claimed&&a.claimable>BigInt(0)&&e.jsx(b,{variant:"primary",onClick:()=>N(a.period),isLoading:u,children:u?"Claiming...":"Claim Yield"})]})}),e.jsx(s,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Your Claimable"}),e.jsx("p",{className:"text-lg font-semibold text-primary",children:a.claimable>BigInt(0)?`${(Number(a.claimable)/1e6).toFixed(6)} USDCx`:"0 USDCx"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),e.jsx("p",{className:`text-lg font-semibold ${a.claimed?"text-gray-500":a.claimable>BigInt(0)?"text-primary":"text-gray-400"}`,children:a.claimed?"Claimed":a.claimable>BigInt(0)?"Available":"No yield"})]})]})})]},a.period))})]})]}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(r,{className:"max-w-md mx-auto",children:[e.jsxs(m,{children:[e.jsx(o,{children:"Connect Your Wallet"}),e.jsx(d,{children:"Please connect your wallet to view and claim yield"})]}),e.jsx(s,{children:e.jsx(b,{onClick:j,variant:"primary",className:"w-full",children:"Connect Stacks Wallet"})})]})})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}export{W as default};
