import{u as w,j as e}from"./web3-vendor-D_2QueDk.js";import{r as c}from"./react-vendor-CRkQyOmC.js";import{C as t,a as m,b as o,c as d,d as x}from"./Card-CAjATs8d.js";import{f as r,B}from"./index-DtViDtG1.js";import{z as u}from"./ui-vendor-uCQPwa67.js";import{u as Y}from"./useMounted-ByB6DgmY.js";import{c as D}from"./useContractWrite-BRNpROzc.js";import{u as I,a as P,b as E,c as z}from"./useYield-Di-lxJu8.js";import"./charts-vendor-CrfDGR6m.js";function V(){const{isConnected:g}=w(),y=Y(),{claimYield:N,isPending:b,isConfirming:h,isConfirmed:j}=D(),{currentPeriod:i}=I(),{yieldEarned:n}=P(),{claimableYield:p}=E(i??void 0),{totalDistributable:f}=z(i??BigInt(0)),s=c.useMemo(()=>{if(!i||i===null)return[];const a=p||BigInt(0),l=f||BigInt(0);return[{period:Number(i),claimable:a,totalDistributable:l,claimed:a===BigInt(0)&&l>BigInt(0)}]},[i,p,f]),v=c.useMemo(()=>s.reduce((a,l)=>a+l.claimable,BigInt(0)),[s]);c.useEffect(()=>{j&&u.success("Yield claimed successfully!")},[j]);const C=async a=>{if(!g){u.error("Please connect your wallet");return}try{await N(BigInt(a))}catch(l){u.error((l==null?void 0:l.message)||"Failed to claim yield"),console.error(l)}};return y?g?e.jsxs("main",{className:"flex-1 bg-gray-50 relative pattern-grid",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-[#06B6D4]/10 to-primary/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-light text-foreground mb-3 tracking-tight",children:"Yield Distribution"}),e.jsx("p",{className:"text-gray-600 font-light text-lg",children:"View and claim your proportional yield"})]}),e.jsxs(t,{className:"mb-8 bg-gradient-to-br from-primary/10 via-white to-[#06B6D4]/10 border-0 elevation-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-[#06B6D4]/20 rounded-full blur-2xl"}),e.jsxs(m,{className:"relative z-10",children:[e.jsx(o,{className:"text-2xl",children:"Total Claimable Yield"}),e.jsx(d,{children:"Available across all periods"})]}),e.jsxs(x,{className:"relative z-10",children:[e.jsx("p",{className:"text-4xl font-light text-primary tracking-tight",children:r(v)}),n&&n>BigInt(0)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["DeFi Yield Earned: ",r(n)]})]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx(t,{children:e.jsxs(x,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No distribution periods available yet."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Yield will appear here after distributions are made."})]})}):s.map(a=>e.jsxs(t,{hover:!0,children:[e.jsx(m,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(o,{children:["Period ",a.period]}),e.jsx(d,{children:a.claimed?"Claimed":a.claimable>BigInt(0)?"Available to claim":"No claimable yield"})]}),!a.claimed&&a.claimable>BigInt(0)&&e.jsx(B,{variant:"primary",onClick:()=>C(a.period),isLoading:b||h,children:b||h?"Claiming...":"Claim Yield"})]})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Distributable"}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:r(a.totalDistributable)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Your Claimable"}),e.jsx("p",{className:"text-lg font-semibold text-primary",children:r(a.claimable)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),e.jsx("p",{className:`text-lg font-semibold ${a.claimed?"text-gray-500":a.claimable>BigInt(0)?"text-primary":"text-gray-400"}`,children:a.claimed?"Claimed":a.claimable>BigInt(0)?"Available":"No yield"})]})]})})]},a.period))})]})]}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(t,{className:"max-w-md mx-auto",children:e.jsxs(m,{children:[e.jsx(o,{children:"Connect Your Wallet"}),e.jsx(d,{children:"Please connect your wallet to view and claim yield"})]})})})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}export{V as default};
