import{c as h}from"./web3-vendor-Ds0lPK1P.js";import{C as r,h as E,i as w,j as y,k as R,l as B,m as M,o as s,u as P,p as A,S as O}from"./index-DrNp6A46.js";function C(e,n=!1){switch(e.type){case r.BoolTrue:return!0;case r.BoolFalse:return!1;case r.Int:case r.UInt:return n?e.value.toString():e.value;case r.Buffer:return`0x${e.value}`;case r.OptionalNone:return null;case r.OptionalSome:return d(e.value);case r.ResponseErr:return d(e.value);case r.ResponseOk:return d(e.value);case r.PrincipalStandard:case r.PrincipalContract:return e.value;case r.List:return e.value.map(o=>d(o));case r.Tuple:const t={};return Object.keys(e.value).forEach(o=>{t[o]=d(e.value[o])}),t;case r.StringASCII:return e.value;case r.StringUTF8:return e.value}}function d(e){switch(e.type){case r.ResponseErr:return{type:c(e),value:C(e,!0),success:!1};case r.ResponseOk:return{type:c(e),value:C(e,!0),success:!0};default:return{type:c(e),value:C(e,!0)}}}function c(e){switch(e.type){case r.BoolTrue:case r.BoolFalse:return"bool";case r.Int:return"int";case r.UInt:return"uint";case r.Buffer:return`(buff ${Math.ceil(e.value.length/2)})`;case r.OptionalNone:return"(optional none)";case r.OptionalSome:return`(optional ${c(e.value)})`;case r.ResponseErr:return`(response UnknownType ${c(e.value)})`;case r.ResponseOk:return`(response ${c(e.value)} UnknownType)`;case r.PrincipalStandard:case r.PrincipalContract:return"principal";case r.List:return`(list ${e.value.length} ${e.value.length?c(e.value[0]):"UnknownType"})`;case r.Tuple:return`(tuple ${Object.keys(e.value).map(n=>`(${n} ${c(e.value[n])})`).join(" ")})`;case r.StringASCII:return`(string-ascii ${w(e.value).length})`;case r.StringUTF8:return`(string-utf8 ${E(e.value).length})`}}const $="/v2/contracts/call-read";async function k({contractName:e,contractAddress:n,functionName:t,functionArgs:o,senderAddress:u,network:p="mainnet",client:l}){const m={sender:u,arguments:o.map(T=>y(T))},v={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)},S=encodeURIComponent(t),b=Object.assign({},R(B(p)),l),N=`${b.baseUrl}${$}/${n}/${e}/${S}`,g=await b.fetch(N,v);if(!g.ok){const T=await g.text().catch(()=>"");throw new Error(`Error calling read-only function. Response ${g.status}: ${g.statusText}. Attempted to fetch ${N} and failed with the message: "${T}"`)}return await g.json().then(M)}const f={"property-nft":"STVAH96MR73TP2FZG2W4X220MEB4NEMJHPMVYQNS.property-nft_clar","rent-vault":"STVAH96MR73TP2FZG2W4X220MEB4NEMJHPMVYQNS.rent-vault_clar","property-shares":"STVAH96MR73TP2FZG2W4X220MEB4NEMJHPMVYQNS.property-shares_clar","simple-dao":"STVAH96MR73TP2FZG2W4X220MEB4NEMJHPMVYQNS.simple-dao_clar","cash-flow-engine":"STVAH96MR73TP2FZG2W4X220MEB4NEMJHPMVYQNS.cash-flow-engine_clar","yield-distributor":"STVAH96MR73TP2FZG2W4X220MEB4NEMJHPMVYQNS.yield-distributor_clar"},L={"property-nft":f["property-nft"],"rent-vault":f["rent-vault"],"property-shares":f["property-shares"],"simple-dao":f["simple-dao"],"cash-flow-engine":f["cash-flow-engine"],"yield-distributor":f["yield-distributor"]},V={testnet:"ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM.usdcx",mainnet:"SP120SBRBQJ00MCWS7TM5R8WJNTTKD5K0HFRC2CNE.usdcx"},U={testnet:"0x008888878f94C0d87defdf0B07f46B93C1934442",mainnet:"0x0000000000000000000000000000000000000000"},j={testnet:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",mainnet:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},X={ETHEREUM:0,STACKS:10003};function F(e){return L[e]}function Y(e="testnet"){return V[e]}function x(e){const n=e.split(".");if(n.length!==2)throw new Error(`Invalid contract address format: ${e}`);return{address:n[0],contractName:n[1]}}const H=O;function _(e){if(e.length===0)return"[]";const n=e.map((t,o)=>{try{const u=d(t);return JSON.stringify(u,(p,l)=>typeof l=="bigint"?l.toString():l)}catch{return`arg${o}`}});return JSON.stringify(n)}function i(e){if(!e)return null;if(typeof e=="string"||typeof e=="number")return e;if(typeof e=="object"){if("value"in e){const n=e.value;if(typeof n=="string"||typeof n=="number")return n;if(typeof n=="object"&&"value"in n)return i(n)}if("repr"in e){const n=e.repr;if(typeof n=="string"){const t=n.match(/u?(\d+)/);if(t)return t[1]}}}return null}function a(e,n,t=[],o={}){const{data:u,isLoading:p,error:l}=h({queryKey:["stacks-read",e,n,_(t)],queryFn:async()=>{const m=F(e),{address:v,contractName:S}=x(m),b=await k({contractAddress:v,contractName:S,functionName:n,functionArgs:t,network:H,senderAddress:v});return d(b)},enabled:o.enabled!==!1,staleTime:3e4});return{data:u,isLoading:p,error:l}}function G(e){const{data:n}=a("cash-flow-engine","get-operating-expenses",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{operatingExpenses:t?BigInt(t):void 0,isLoading:!1,error:null}}function Q(e){const{data:n}=a("cash-flow-engine","get-capex-spent",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{capexSpent:t?BigInt(t):void 0,isLoading:!1,error:null}}function W(e){const{data:n}=a("cash-flow-engine","get-working-capital-reserve",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{workingCapitalReserve:t?BigInt(t):void 0,isLoading:!1,error:null}}function Z(e){const{data:n}=a("cash-flow-engine","get-current-period",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{currentPeriod:t?BigInt(t):void 0,isLoading:!1,error:null}}function K(e){const{data:n}=a("cash-flow-engine","get-distributable-cash-flow",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{distributableCashFlow:t?BigInt(t):void 0,isLoading:!1,error:null}}function q(e){const{data:n}=a("rent-vault","get-rent-collected",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{rentCollected:t?BigInt(t):void 0,isLoading:!1,error:null}}function z(e,n){const{address:t}=P(),{data:o}=a("yield-distributor","get-claimable-yield",e!==void 0&&n!==void 0&&t?[s(Number(e)),s(Number(n)),A(t)]:[],{enabled:e!==void 0&&n!==void 0&&!!t}),u=i(o);return{claimableYield:u?BigInt(u):void 0,isLoading:!1,error:null}}function I(e){const{data:n}=a("yield-distributor","get-current-distribution-period",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0}),t=i(n);return{currentPeriod:t?BigInt(t):void 0,isLoading:!1,error:null}}function ee(e){const{data:n}=a("property-nft","get-property-data",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0});return{propertyData:n,isLoading:!1,error:null}}function ne(){const{data:e}=a("property-nft","get-last-token-id"),n=i(e);return{lastTokenId:BigInt(n||0),isLoading:!1,error:null}}function te(e){const{data:n}=a("property-nft","get-owner",e!==void 0?[s(Number(e))]:[],{enabled:e!==void 0});return{owner:n==null?void 0:n.value,isLoading:!1,error:null}}function re(){const{data:e}=a("simple-dao","get-proposal-count"),n=i(e);return{proposalCount:n?BigInt(n):void 0,isLoading:!1,error:null}}function se(e,n){const{data:t}=a("simple-dao","get-proposal",e!==void 0&&n!==void 0?[s(Number(e)),s(Number(n))]:[],{enabled:e!==void 0&&n!==void 0});return{proposal:t,isLoading:!1,error:null}}function ae(e,n){const{data:t}=a("simple-dao","is-proposal-approved",e!==void 0&&n!==void 0?[s(Number(e)),s(Number(n))]:[],{enabled:e!==void 0&&n!==void 0});return{isApproved:t==null?void 0:t.value,isLoading:!1,error:null}}export{X as D,j as E,U as X,K as a,Z as b,ne as c,ee as d,te as e,G as f,W as g,Q as h,Y as i,k as j,d as k,I as l,z as m,re as n,se as o,x as p,ae as q,F as r,q as u};
