import{j as e}from"./web3-vendor-Ds0lPK1P.js";import{r as x}from"./react-vendor-CIGKTyFs.js";import{C as t,a as n,b as a,c as i,d as l}from"./Card-DWvOJBa6.js";import{u as S,B as b}from"./index-DrNp6A46.js";import{z as m}from"./ui-vendor-BDTlLGxs.js";import{u as w}from"./useMounted-Ci4OUALD.js";import{b as E}from"./useStacksWriteWallet-DpzWZPfV.js";import{f as P,g as k,b as D}from"./useStacksRead-BF2QryqZ.js";import"./charts-vendor-D_nd7r1X.js";function I(){const{isConnected:p,connect:N}=S(),y=w(),[d]=x.useState(BigInt(1)),[c,u]=x.useState(""),[g,h]=x.useState(""),{recordExpense:v,isPending:j}=E(),{operatingExpenses:s}=P(d),{workingCapitalReserve:f}=k(d),{currentPeriod:r}=D(d),C=async()=>{if(!c||parseFloat(c)<=0){m.error("Please enter a valid amount");return}if(!g.trim()){m.error("Please enter a description");return}if(!p){m.error("Please connect your wallet");return}try{await v(d,c),u(""),h("")}catch(o){console.error(o)}};return y?p?e.jsx("main",{className:"flex-1 bg-gray-50 relative pattern-grid",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-light text-foreground mb-3 tracking-tight",children:"Expense Management"}),e.jsx("p",{className:"text-gray-600 font-light text-lg",children:"Record and track operating expenses"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(a,{className:"text-lg",children:"Total Expenses"}),e.jsx(i,{children:r!=null?`Period ${r.toString()}`:"Current period"})]}),e.jsx(l,{children:e.jsx("p",{className:"text-3xl font-bold text-red-500",children:s?`${(Number(s)/1e6).toFixed(6)} USDCx`:"0 USDCx"})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(a,{className:"text-lg",children:"Working Capital Reserve"}),e.jsx(i,{children:"Safety buffer"})]}),e.jsx(l,{children:e.jsx("p",{className:"text-3xl font-bold text-foreground",children:f?`${(Number(f)/1e6).toFixed(6)} USDCx`:"0 USDCx"})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(a,{className:"text-lg",children:"Current Period"}),e.jsx(i,{children:"Active period"})]}),e.jsx(l,{children:e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r!=null?r.toString():"-"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(a,{children:"Record New Expense"}),e.jsx(i,{children:"Add an operating expense"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (USDCx)"}),e.jsx("input",{type:"number",step:"0.01",value:c,onChange:o=>u(o.target.value),placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:g,onChange:o=>h(o.target.value),placeholder:"e.g., Property maintenance",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"})]}),e.jsx(b,{variant:"primary",className:"w-full",onClick:C,isLoading:j,children:j?"Recording...":"Record Expense"})]})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(a,{children:"Expense Summary"}),e.jsx(i,{children:r!==void 0?`Total expenses for period ${r!==null?r.toString():""}`:"Current period expenses"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:s!==void 0&&s>BigInt(0)?e.jsx("div",{className:"border-b border-gray-200 pb-4",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Total Operating Expenses"}),e.jsx("p",{className:"text-sm text-gray-500",children:r!==void 0?`Period ${r!==null?r.toString():""}`:"Current period"})]}),e.jsx("p",{className:"font-semibold text-red-500",children:s?`${(Number(s)/1e6).toFixed(6)} USDCx`:"0 USDCx"})]})}):e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No expenses recorded for this period yet."})})})]})]})]})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(t,{className:"max-w-md mx-auto",children:[e.jsxs(n,{children:[e.jsx(a,{children:"Connect Your Wallet"}),e.jsx(i,{children:"Please connect your wallet to record expenses"})]}),e.jsx(l,{children:e.jsx(b,{onClick:N,variant:"primary",className:"w-full",children:"Connect Stacks Wallet"})})]})})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}export{I as default};
