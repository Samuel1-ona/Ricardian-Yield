import{u as z,f as h,j as e}from"./web3-vendor-D_2QueDk.js";import{r as t}from"./react-vendor-CRkQyOmC.js";import{C as o,a as d,b as c,c as m,d as x}from"./Card-CAjATs8d.js";import{f as u,b as V,B as y}from"./index-DtViDtG1.js";import{u as W}from"./useMounted-ByB6DgmY.js";import{z as b}from"./ui-vendor-uCQPwa67.js";import{d as H,a as q,e as L,f as $,g as G,h as J,i as K}from"./useYield-Di-lxJu8.js";import{d as O,e as Q,f as X}from"./useContractWrite-BRNpROzc.js";import"./charts-vendor-CrfDGR6m.js";function ne(){const{isConnected:v}=z(),T=W(),[R,f]=t.useState(!1),[i,p]=t.useState(""),[l,g]=t.useState(""),[N,j]=t.useState(!1),{totalAssets:w}=H(),{yieldEarned:C}=q(),{totalDeposited:D}=L(),{vaultAddress:k}=$(),{reserveThreshold:r}=G(),{minimumDeposit:a}=J(),{autoDepositEnabled:n}=K(),{setReserveThreshold:M,isPending:F,isConfirmed:S}=O(),{setMinimumDeposit:I,isPending:P,isConfirmed:A}=Q(),{setAutoDeposit:U,isPending:B,isConfirmed:E}=X();t.useEffect(()=>{r&&!i&&p(h(r,6))},[r,i]),t.useEffect(()=>{a&&!l&&g(h(a,6))},[a,l]),t.useEffect(()=>{n!==void 0&&j(n??!1)},[n]),t.useEffect(()=>{(S||A||E)&&(b.success("Configuration updated successfully!"),f(!1))},[S,A,E]);const Y=async()=>{if(!v){b.error("Please connect your wallet");return}try{i&&parseFloat(i)>0&&await M(i),l&&parseFloat(l)>0&&await I(l),await U(N)}catch(s){b.error((s==null?void 0:s.message)||"Failed to update configuration"),console.error(s)}};return T?v?e.jsxs("main",{className:"flex-1 bg-gray-50 relative pattern-waves",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-bl from-[#06B6D4]/15 to-primary/15 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-primary/10 to-[#06B6D4]/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-light text-foreground mb-3 tracking-tight",children:"Yield Stacking"}),e.jsx("p",{className:"text-gray-600 font-light text-lg",children:"Monitor and configure automatic DeFi yield stacking"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(o,{className:"bg-gradient-to-br from-primary/10 via-white to-[#06B6D4]/10 border-0 elevation-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-primary/20 to-[#06B6D4]/20 rounded-full blur-xl"}),e.jsxs(d,{className:"relative z-10",children:[e.jsx(c,{className:"text-lg",children:"Total Assets in Vault"}),e.jsx(m,{children:"Principal + Yield"})]}),e.jsx(x,{className:"relative z-10",children:e.jsx("p",{className:"text-3xl font-light text-primary tracking-tight",children:w?u(w):"0 USDC"})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{className:"text-lg",children:"Yield Earned"}),e.jsx(m,{children:"From DeFi vault"})]}),e.jsx(x,{children:e.jsx("p",{className:"text-3xl font-bold text-primary",children:C?u(C):"0 USDC"})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{className:"text-lg",children:"Principal Deposited"}),e.jsx(m,{children:"Initial deposit amount"})]}),e.jsx(x,{children:e.jsx("p",{className:"text-3xl font-bold text-foreground",children:D?u(D):"0 USDC"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Current Configuration"}),e.jsx(m,{children:"Yield stacking settings"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Vault Address"}),e.jsx("span",{className:"font-mono text-sm text-foreground",children:k?V(k):"Not set"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Reserve Threshold"}),e.jsx("span",{className:"font-semibold text-foreground",children:r?u(r):"0 USDC"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Minimum Deposit"}),e.jsx("span",{className:"font-semibold text-foreground",children:a?u(a):"0 USDC"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Auto-Deposit"}),e.jsx("span",{className:`font-semibold ${n?"text-primary":"text-gray-500"}`,children:n?"Enabled":"Disabled"})]}),R?e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reserve Threshold (USDC)"}),e.jsx("input",{type:"number",step:"0.01",value:i,onChange:s=>p(s.target.value),placeholder:"2000.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Deposit (USDC)"}),e.jsx("input",{type:"number",step:"0.01",value:l,onChange:s=>g(s.target.value),placeholder:"1000.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Deposit Enabled"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:s=>j(s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"primary",className:"flex-1",onClick:Y,isLoading:F||P||B,children:"Save"}),e.jsx(y,{variant:"outline",className:"flex-1",onClick:()=>{f(!1),p(r?h(r,6):""),g(a?h(a,6):""),j(n??!1)},children:"Cancel"})]})]}):e.jsx(y,{variant:"outline",className:"w-full mt-4",onClick:()=>f(!0),children:"Configure Settings"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"How It Works"}),e.jsx(m,{children:"Automatic yield stacking explained"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"1"})}),e.jsx("p",{children:"When rent is collected, idle funds above the reserve threshold are automatically deposited into the ERC-4626 vault."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"2"})}),e.jsx("p",{children:"The vault earns DeFi yield on your idle funds, tracked separately from rental income."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"3"})}),e.jsx("p",{children:"Both rental yield and DeFi yield are included in distributions to shareholders."})]}),e.jsx("div",{className:"bg-primary-light rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-primary-dark",children:[e.jsx("strong",{children:"Conservative Reserves:"})," A configurable reserve threshold ensures sufficient liquidity for expenses while maximizing yield on idle funds."]})})]})})]})]})]})]}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(o,{className:"max-w-md mx-auto",children:e.jsxs(d,{children:[e.jsx(c,{children:"Connect Your Wallet"}),e.jsx(m,{children:"Please connect your wallet to view yield stacking"})]})})})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}export{ne as default};
