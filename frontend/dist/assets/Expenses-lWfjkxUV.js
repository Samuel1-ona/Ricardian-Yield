import{u as w,j as e}from"./web3-vendor-D_2QueDk.js";import{r as x}from"./react-vendor-CRkQyOmC.js";import{C as n,a as t,b as a,c as i,d as o}from"./Card-CAjATs8d.js";import{f as m,B as E}from"./index-DtViDtG1.js";import{z as d}from"./ui-vendor-uCQPwa67.js";import{u as P}from"./useMounted-ByB6DgmY.js";import{b as S}from"./useContractWrite-BRNpROzc.js";import{b as R,c as k,a as D}from"./useCashFlow-D3VL_ORA.js";import"./charts-vendor-CrfDGR6m.js";function M(){const{isConnected:p}=w(),N=P(),[c,u]=x.useState(""),[g,h]=x.useState(""),{recordExpense:v,isPending:j,isConfirming:f,isConfirmed:y}=S(),{operatingExpenses:l}=R(),{workingCapitalReserve:b}=k(),{currentPeriod:s}=D();x.useEffect(()=>{y&&(d.success("Expense recorded successfully!"),u(""),h(""))},[y]);const C=async()=>{if(!c||parseFloat(c)<=0){d.error("Please enter a valid amount");return}if(!g.trim()){d.error("Please enter a description");return}if(!p){d.error("Please connect your wallet");return}try{await v(c)}catch(r){d.error((r==null?void 0:r.message)||"Failed to record expense"),console.error(r)}};return N?p?e.jsx("main",{className:"flex-1 bg-gray-50 relative pattern-grid",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-light text-foreground mb-3 tracking-tight",children:"Expense Management"}),e.jsx("p",{className:"text-gray-600 font-light text-lg",children:"Record and track operating expenses"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(n,{children:[e.jsxs(t,{children:[e.jsx(a,{className:"text-lg",children:"Total Expenses"}),e.jsx(i,{children:s!=null?`Period ${s.toString()}`:"Current period"})]}),e.jsx(o,{children:e.jsx("p",{className:"text-3xl font-bold text-red-500",children:l?m(l):"0 USDC"})})]}),e.jsxs(n,{children:[e.jsxs(t,{children:[e.jsx(a,{className:"text-lg",children:"Working Capital Reserve"}),e.jsx(i,{children:"Safety buffer"})]}),e.jsx(o,{children:e.jsx("p",{className:"text-3xl font-bold text-foreground",children:b?m(b):"0 USDC"})})]}),e.jsxs(n,{children:[e.jsxs(t,{children:[e.jsx(a,{className:"text-lg",children:"Current Period"}),e.jsx(i,{children:"Active period"})]}),e.jsx(o,{children:e.jsx("p",{className:"text-3xl font-bold text-foreground",children:s!=null?s.toString():"-"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsxs(t,{children:[e.jsx(a,{children:"Record New Expense"}),e.jsx(i,{children:"Add an operating expense"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (USDC)"}),e.jsx("input",{type:"number",step:"0.01",value:c,onChange:r=>u(r.target.value),placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:g,onChange:r=>h(r.target.value),placeholder:"e.g., Property maintenance",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"})]}),e.jsx(E,{variant:"primary",className:"w-full",onClick:C,isLoading:j||f,children:j||f?"Recording...":"Record Expense"})]})]}),e.jsxs(n,{children:[e.jsxs(t,{children:[e.jsx(a,{children:"Expense Summary"}),e.jsx(i,{children:s!==void 0?`Total expenses for period ${s!==null?s.toString():""}`:"Current period expenses"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:l!==void 0&&l>BigInt(0)?e.jsx("div",{className:"border-b border-gray-200 pb-4",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Total Operating Expenses"}),e.jsx("p",{className:"text-sm text-gray-500",children:s!==void 0?`Period ${s!==null?s.toString():""}`:"Current period"})]}),e.jsx("p",{className:"font-semibold text-red-500",children:m(l)})]})}):e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No expenses recorded for this period yet."})})})]})]})]})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(n,{className:"max-w-md mx-auto",children:e.jsxs(t,{children:[e.jsx(a,{children:"Connect Your Wallet"}),e.jsx(i,{children:"Please connect your wallet to record expenses"})]})})})}):e.jsx("main",{className:"flex-1 bg-gray-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}export{M as default};
